# Understanding and Resolving Canon Conflicts

## What is a Canon Conflict?

A Canon Conflict occurs when AI-generated content contradicts something established in your Canon Vault. The Halcyon Cinema AI is designed to **never silently change your Canon**. Instead, it flags potential conflicts and lets you decide how to proceed.

## Types of Conflicts

### Character Conflicts
- Physical description doesn't match (e.g., wrong eye color)
- Personality inconsistency (e.g., shy character being outgoing)
- Relationship errors (e.g., enemies acting friendly)
- Backstory contradictions

### Location Conflicts
- Setting details don't match (e.g., wrong room layout)
- Atmosphere inconsistency
- Historical inaccuracies for the location

### Rule Conflicts
- Breaking established world rules (e.g., magic used incorrectly)
- Technology inconsistencies
- Social rule violations

### Timeline Conflicts
- Events happening out of order
- Characters present before they should exist
- Consequences not matching previous events

### Theme Conflicts
- Tone doesn't match established themes
- Symbolic elements used incorrectly

## How Conflicts are Detected

When you use AI generation, the system:

1. **Loads your Canon** - All relevant entries are loaded into context
2. **Generates content** - AI creates the requested text
3. **Validates against Canon** - Generated content is checked for conflicts
4. **Flags issues** - Any potential conflicts are highlighted

Conflicts are classified by severity:
- **Warning** (yellow) - Minor inconsistency, may be intentional
- **Error** (red) - Clear contradiction of established Canon

## Resolving Conflicts

When a conflict is detected, you have three options:

### 1. Keep Canon
Choose this when the AI made a mistake and your Canon is correct.

**What happens:**
- The conflicting text is highlighted for you to edit
- Canon remains unchanged
- You manually fix the generated content

**Best for:**
- True AI errors
- Protecting critical story elements
- Maintaining established continuity

### 2. Update Canon
Choose this when the AI suggestion is actually better than your current Canon.

**What happens:**
- You're prompted to confirm the Canon change
- The Canon entry is updated with new information
- A version history entry is created
- The generated content is accepted

**Best for:**
- Evolving characters
- Story developments that should update Canon
- Fixing outdated Canon entries

**Example:**
Your Canon says "Elena has never used magic" but your story has progressed and she's now learned. Update the Canon to reflect her current abilities.

### 3. Fork Timeline
Choose this for alternate universe or "what if" scenarios.

**What happens:**
- A new timeline branch is created
- The original Canon is preserved
- The conflicting content exists in the alternate timeline
- You can switch between timelines

**Best for:**
- Exploring alternate scenarios
- "What if" drafts
- Parallel story development
- Multiple ending exploration

## Preventing Conflicts

### Best Practices

1. **Build Canon Early**
   - Add characters before writing about them
   - Define rules before using them in scenes
   - Establish locations before setting scenes there

2. **Keep Canon Updated**
   - After major story developments, update relevant entries
   - Review Canon periodically for outdated information
   - Use version history to track changes

3. **Use Locking Wisely**
   - Lock finalized elements (published chapters' Canon)
   - Soft lock for protection with flexibility
   - Hard lock for absolute protection

4. **Be Specific**
   - Vague Canon leads to ambiguous conflicts
   - Detailed entries help the AI stay consistent
   - Include constraints in rules (what can't happen)

### Using Canon Hints

When generating content, you can emphasize specific Canon:
- Select characters to focus on
- Specify locations to use
- Highlight rules that apply

This helps the AI prioritize the right Canon elements.

## Common Scenarios

### Scenario: Character Growth
Your character was shy at the start but has grown. Old Canon says "shy and withdrawn" but new scenes show confidence.

**Solution:** Update Canon to reflect development. Add a note about their arc: "Initially shy, gained confidence after [event]."

### Scenario: Retroactive World-building
You wrote magic working one way, then decided to change the rules.

**Solution:** Update the rule Canon. Review previous chapters for consistency. Consider if this needs a timeline fork.

### Scenario: Multiple Drafts
You want to explore two different directions for a plot point.

**Solution:** Fork timeline at the decision point. Develop both branches. Choose which becomes "canon" later.

### Scenario: Collaboration Disagreement
Working with a co-author who changed something you established.

**Solution:** Review version history. Discuss the change. Either revert or accept and update related Canon.

## Technical Details

### Conflict Detection Sensitivity

The system's conflict detection can be configured:
- **Strict** - Flags any potential inconsistency
- **Moderate** - Flags clear contradictions only
- **Relaxed** - Only flags major errors

Set this in Project Settings > Canon Enforcement.

### Version History

All Canon changes are tracked:
- Who made the change
- When it was made
- What changed
- Why (if provided)

Access via Canon Vault > [Entry] > Version History.

### Bulk Conflict Resolution

For large-scale changes:
1. Review all flagged conflicts
2. Group by type
3. Apply consistent resolution
4. Verify related Canon is updated

## Getting Help

If you're unsure how to resolve a conflict:
- Check the entry's version history for context
- Review related Canon entries
- Consider the story's direction
- When in doubt, Keep Canon and edit manually

Remember: **You are always in control**. The AI suggests; you decide.
